# cat << EOF > /dev/null
# https://github.com/gpakosz/.tmux
# (‑●‑●)> dual licensed under the WTFPL v2 license and the MIT license,
#         without any warranty.
#         Copyright 2012— Gregory Pakosz (@gpakosz).
# /!\ do not edit this file
#     instead, override settings in ~/.tmux.conf.local, see README.md


# -- general -------------------------------------------------------------------
# https://github.com/tmux/tmux/issues/1246 - colors in vim
set -g default-terminal "screen-256color"
set -ga terminal-overrides ",xterm-256color:Tc"

setw -g xterm-keys on
set -s escape-time 10                     # faster command sequences
set -sg repeat-time 600                   # increase repeat timeout
set -s focus-events on

set -g prefix2 C-a                        # GNU-Screen compatible prefix
bind C-a send-prefix -2

set -q -g status-utf8 on                  # expect UTF-8 (tmux < 2.2)
  setw -q -g utf8 on

  set -g history-limit 5000                 # boost history

# edit configuration
  bind e new-window -n '~/.tmux.conf.local' "sh -c '\${EDITOR:-vim} ~/.tmux.conf.local && tmux source ~/.tmux.conf && tmux display \"~/.tmux.conf sourced\"'"

# reload configuration
  bind r source-file ~/.tmux.conf \; display '~/.tmux.conf sourced'


# -- display -------------------------------------------------------------------

  set -g base-index 1         # start windows numbering at 1
  setw -g pane-base-index 1   # make pane numbering consistent with windows

  setw -g automatic-rename on # rename window to reflect current program
  set -g renumber-windows on  # renumber windows when a window is closed

  set -g set-titles on                        # set terminal title
  set -g set-titles-string '#h ❐ #S ● #I #W'

  set -g display-panes-time 800 # slightly longer pane indicators display time
  set -g display-time 1000      # slightly longer status messages display time

  set -g status-interval 10     # redraw status line every 10 seconds

# activity
  set -g monitor-activity on
  set -g visual-activity off


# -- navigation ----------------------------------------------------------------

# create session
  bind C-c new-session

# split current window horizontally
  bind - split-window -v
# split current window vertically
  bind | split-window -h

# copy to Mac OSX clipboard
  tmux_conf_copy_to_os_clipboard=true
  if -b 'command -v reattach-to-user-namespace > /dev/null 2>&1' 'bind y run -b "tmux save-buffer - | reattach-to-user-namespace pbcopy"'

# -- buffers -------------------------------------------------------------------

  bind b list-buffers  # list paste buffers
  bind p paste-buffer  # paste from the top paste buffer
  bind P choose-buffer # choose which buffer to paste from

# customizations #
  set -g mouse on

  set-window-option -g allow-rename off
  set-window-option -g automatic-rename off

# set C-b as the only prefix
  set -gu prefix2
  unbind C-a
  unbind C-b
  set -g prefix C-b
  bind C-b send-prefix

# No more dinging
  set -g bell-action none

# move status line to top
  set -g status-position top

# toggle between panes
  bind -r C-b last-window      # move to last active window

# reload config file 
  bind r source-file ~/.tmux.conf \; display-message "Config reloaded..."

# Unbind arrow keys so we can use them for navigating windows in
# next block
  unbind C-Up
  unbind C-Down
  unbind C-Left
  unbind C-Right

# smart pane switching with awareness of vim splits
# bad idea. messes up all kinds of vim stuff
  # bind -n C-k run "(tmux display-message -p '#{pane_current_command}' | grep -iq vim && tmux send-keys C-h) || tmux select-pane -L"
  # bind -n C-n run "(tmux display-message -p '#{pane_current_command}' | grep -iq vim && tmux send-keys C-j) || tmux select-pane -D"
  # bind -n C-e run "(tmux display-message -p '#{pane_current_command}' | grep -iq vim && tmux send-keys C-k) || tmux select-pane -U"
  # bind -n C-i run "(tmux display-message -p '#{pane_current_command}' | grep -iq vim && tmux send-keys C-l) || tmux select-pane -R"

# smart pane switching with awareness of vim splits
  bind -n C-Left run "(tmux display-message -p '#{pane_current_command}' | grep -iq vim && tmux send-keys C-h) || tmux select-pane -L"
  bind -n C-Down run "(tmux display-message -p '#{pane_current_command}' | grep -iq vim && tmux send-keys C-j) || tmux select-pane -D"
  bind -n C-Up run "(tmux display-message -p '#{pane_current_command}' | grep -iq vim && tmux send-keys C-k) || tmux select-pane -U"
  bind -n C-Right run "(tmux display-message -p '#{pane_current_command}' | grep -iq vim && tmux send-keys C-l) || tmux select-pane -R"
  # bind -n C-\ run "(tmux display-message -p '#{pane_current_command}' | grep -iq vim && tmux send-keys 'C-\\') || tmux select-pane -l"

  # bind -n C-h run "(tmux display-message -p '#{pane_current_command}' | grep -iq vim && tmux send-keys C-h) || tmux select-pane -L"
  # bind -n C-j run "(tmux display-message -p '#{pane_current_command}' | grep -iq vim && tmux send-keys C-j) || tmux select-pane -D"
  # bind -n C-k run "(tmux display-message -p '#{pane_current_command}' | grep -iq vim && tmux send-keys C-k) || tmux select-pane -U"
  # bind -n C-l run "(tmux display-message -p '#{pane_current_command}' | grep -iq vim && tmux send-keys C-l) || tmux select-pane -R"



# STATUS BAR CONTENT {{{ //h/t https://github.com/adamalbrecht/dotfiles-3/blob/master/tmux.conf
set -g status-left ''
set -g status-right-length 70
set -g status-right '#{cpu_fg_color} CPU #{cpu_percentage} #[fg=default]| #{ram_fg_color}RAM #{ram_percentage}#[fg=default] | #(/usr/local/bin/battery -t) |#(uptime | sed -e "s/^ *//" | cut -f 1 -d , | cut -f 2- -d " ") | %b %d %l:%M %p '
set -g window-status-format " #I #W  "
set -g window-status-current-format "  #[bold] #W  "
set -g status-justify left
# }}}

# COLORS {{{
# https://gist.github.com/paulrouget/cc3cf124e0789c5dc1d387c2180f132b
set -g status-position bottom
set -g status-style default,fg="#666666",bg=default
set -g window-status-style default,fg="#666667",bg=default
# set-window-option -g window-status-attr default ???
setw -g window-status-current-style default,fg="#BD92F8",bg=default
# set-window-option -g window-status-current-fg "#A52B29" # Solarized
# set-window-option -g window-status-current-attr default
set -g message-style bold,fg=white,bg=white
set -g status-left " "
set -g status-justify left
# setw -g window-status-format         ' #(echo "#{pane_current_command}") '
# setw -g window-status-current-format ' #(echo "#{pane_current_command}") '
# set -g status-right " "
# }}}

# List of plugins
  set -g @plugin 'tmux-plugins/tpm'
  set -g @plugin 'tmux-plugins/tmux-sensible'
  # set -g @plugin 'arcticicestudio/nord-tmux'

# Other examples:
# set -g @plugin 'github_username/plugin_name'
# set -g @plugin 'git@github.com/user/plugin'
# set -g @plugin 'git@bitbucket.com/user/plugin'

# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
  run -b '~/.tmux/plugins/tpm/tpm'
